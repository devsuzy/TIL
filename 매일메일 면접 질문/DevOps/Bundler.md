# Bundler

> 토스 프론트엔드 - Bundling Fundamentals

### 번들링이란?
- 여러 개의 파일(JavaScript, CSS, 이미지 등 웹 개발에 필요한 리소스 파일들)을 하나 또는 몇 개의 파일로 묶는 작업

### 번들링의 목적
- 기능 단위로 나눠진 수십, 수백개 파일들을 하나로 묶어 브라우저가 요청해야할 파일 수를 줄여 로딩 속도를 향상시킨다.
- 묶인 파일 하나만 캐시하면 되어 효율적이다.
- 개발, 운영 환경을 각각 따로 설정할 수 있고, 개발할 때는 모듈화를 유지하면서 배포할 때는 성능 최적화를 한다.

### 번들링 과정

1. 기능별로 여러 JS파일을 각각 나눠서 관리
    - 각 파일들은 서로 의존성 관계
```
├── index.js
├── utils.js
├── auth.js
└── dashboard.js
```

2. 번들러가 파일 관계를 분석
    - 번들러는 각각 어느 파일이 의존 관계를 가지고 있는지 분석학 의존성 그래프를 그림

3. 파일들을 의존성 순서에 맞춰서 하나의 파일로 합침
    - 사용되지 않는 코드는 제거 -> 트리 셰이킹
    - 필요한 경우, 여러 개의 작은 번들로 나눔 -> 코드 스플리팅
    - 코드에서 공백, 주석을 없애서 크기를 줄임 -> Minification
```
└── bundle.js
```

4. 최종 결과물을 배포

### 대표적인 번들러

- Webpack
    - 가장 널리 사용되는 전통적인 번들러
    - 매우 강력한 플러그인/로더 생태계를 가지고 있어 어떤 프로젝트에도 적용 가능
    - 설정이 복잡하고 번들링 속도가 상대적으로 느린 편
- Rollup
    - 라이브러리 제작에 최적화된 번들러
    - 결과물이 매우 최적화되어 있어 작은 크기의 번들을 만들기 좋음
    - 대형 애플리케이션을 다룰 때는 설정이 복잡하거나 불편
    - 개발 서버는 기본적으로 제공하지 않아 별도 설정 필요
- Vite
    - 번들링은 Rollup에 맡기고, 개발 서버는 자체적으로 제공하는 최신 빌드 툴
    - 번들링 없이 개발 서버를 띄우는 ESM 기반 방식
    - 운영 배포시에는 성능을 위해 번들링 진행
    - 설정이 간단해서 초기 진입 장벽이 낮은 편
- esbuild
    - Go 언어로 작성된 초고속 빌드 툴
    - 번들링, 트랜스파일링 모두 빠른 속도
    - 개발 서버는 기본 제공하지 않음
    - 자체 트랜스파일러를 사용해서 별도 Babel 없이도 최신 문법 변환이 가능