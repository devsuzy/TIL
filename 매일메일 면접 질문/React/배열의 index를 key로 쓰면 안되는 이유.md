#  배열의 index를 key로 쓰면 안되는 이유

> 매일메일 FE 2025년 2월 1주차 월요일 질문

### 리액트 내 배열 요소의 index를 key로 사용하는 것이 권장되지 않는 이유

- 배열에 새로운 요소가 추가 및 삭제되면 그 뒤에 있는 요소들의 인덱스가 모두 바뀌게 됨
- 리액트는 이를 새로운 요소로 인식해 불필요하게 재렌더링을 하거나, 요소의 상태를 잘못 처리할 수 있음
- 성능 문제 초래 및 사용자 입력 상태가 초기화 되는 등의 예기치 않은 버그 발생

### 고유한 key 속성을 만드는 방법

- DB에서 얻은 고유 ID값을 사용한다.
- 고유 key/ID/숫자/문자열을 생성하는 함수를 만들어 사용한다.
- uuid, uniqid 등의 랜덤 값을 생성하는 npm 패키지를 사용한다.
- `${item.title}_${item.username}` 와 같은 형태로 여러 필드를 결합하여 고유 값을 만들어 사용한다.

### 안심하고 index를 key로 써도 되는 3가지 충족 요건

- 배열과 각 요소가 static이며 computed 되지 않고 변하지 않아야 한다.
- 데이터 내부에 id로 쓸만한 unique 값이 없을 경우
- 데이터가 결코 reordered or filtered 되지 않을 경우