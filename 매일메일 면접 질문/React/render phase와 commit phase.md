# 리액트의 render phase와 commit phase

> 매일메일 FE 2025년 1월 3주차 화요일 질문

### 리액트의 렌더링 과정

1. 트리거
2. 렌더링
3. 커밋

### 1단계: 렌더링 트리거
- 초기 렌더링: 앱을 시작할 때 초기 렌더링을 트리거 함
- 이후 렌더링: 첫 렌더링 이후 set 함수를 통해 상태 업데이트 시 추기적인 렌더링을 트리거 함

### 2단계: 컴포넌트 렌더링 (Render Phase)
- 초기 렌더링: root 컴포넌트 호출
- 이후 렌더링: 상태 업데이트가 일어나 렌더링을 트리거한 컴포넌트 호출
---
- 컴포넌트 렌더링
    - render() 메서드 혹은 함수형 컴포넌트 반환값을 기반으로 UI를 생성
- 가상 DOM 업데이트
    - 생성된 UI를 기반으로 변경사항을 가상 DOM에서 계산하여 비교
- 컴포넌트 업데이트 결정
    - 이전 가상 DOM과 현재 가상 DOM을 비교하여 변경된 부분을 식별
    - 이전 결과가 동일하면 실제 DOM에는 변경 사항이 반영되지 않음

### 3단계: DOM에 커밋 (Commit Phase)
- 초기 렌더링: `appendChild()` DOM API를 사용하여 생성한 모든 DOM 노드를 화면에 표시
- 이후 렌더링: 변경사항을 적용하여 DOM이 최신 렌더링 출력과 일치시킴
---
- 실제 DOM 갱신
    - 가상 DOM에서 계산된 결과를 실제 DOM에 반영
    - 변경된 부분만 갱신하여 불필요한 리렌더링을 방지하고 성능을 최적화함
- 부수효과 처리
    - 네트워크 요청, 상태 변경 등의 사이드 이펙트를 처리
    - `useEffect` 훅이나 생명주기 메서드에서 등록된 작업들을 실행하여 컴포넌트의 동작을 완성
- 렌더링 결과 확인
    - 변경된 UI가 사용자에게 표시되기 전에 최종적으로 확인

### render phase와 commit phase가 동기화될 때의 특징
- 단계적 진행
    - render phase과 완료되면 즉시 commit phase를 실행하지 않음
    - 다른 높은 우선순위 작업이 있다면 머저 처리한 후 나중에 commit phase를 실행
- 병목 관리
    - render phase에서 모든 변경사항이 Fiber Tree에 준비된 상태에서 commit phase로 넘어감
    - render와 commit 단계에 일관성이 유지됨