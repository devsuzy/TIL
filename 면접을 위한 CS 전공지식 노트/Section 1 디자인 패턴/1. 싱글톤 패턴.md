# Section 1 디자인 패턴

## 싱글톤 패턴

<img width="640" height="400" alt="image" src="https://github.com/user-attachments/assets/9ab67e93-d89a-48c8-92fa-1f26ee0fb16f" />


### 특징
- 하나의 클래스에 오직 하나의 인스턴스만 가지는 패턴
- 보통 데이터베이스 연결 모듈에 많이 사용

### 자바스크립트의 싱글톤 패턴
```js
class Singleton {
    constructor() {
        if (!Singleton.instance) {
            Singleton.instance = this;
        }
        return Singleton.instance;
    }
    getInstance() {
        return this;
    }
}

const a = new Singleton();
const b = new Singleton();
console.log(a === b) // true
```

### 데이터베이스 연결 모듈
```js
const URL = 'mongodb://localhost:27017/kundolapp';
const createConnection = url => ({"url": url});

class DB {
    constructor(url) {
        if (!DB.instance) {
            DB.instacne = createConnection(url)
        }
        return DB.instacne
    }
    connect() {
        return this.instance
    }
}

const a = new DB(URL);
const b = new DB(URL);
console.log(a === b) // true
```

### 단점
- 독립적인 인스턴스를 만들기가 어려워 TDD와 같은 단위 테스트가 어렵다.
- 모듈 간의 결합도가 강하다.

### 해결 방법
- 의존성 주입
    - 메인 모듈이 하위 모듈에 의존성을 직접 주입하는 것이 아닌 중간에 '의존성 주입자'를 주어 간접적으로 의존성을 주입하는 방식
- 의존성 주입 원칙
    - 상위 모듈은 하위 모듈에서 어떠한 것도 가져오지 않는다.
    - 추상화에 의존해야 한다.
- 장점
    - 모듈들을 쉽게 교체할 수 있어 테스팅과 마이그레이션이 수월해진다.
    - 의존성 방향이 일관되어 쉽게 추론이 가능하다.
    - 모듈 간의 관계들이 명확해진다.
- 단점
    - 모듈들이 분리되기 때문에 클래스 수가 늘어나 복잡성이 증가한다.

